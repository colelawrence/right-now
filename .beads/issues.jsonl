{"id":"bd-1kv","title":"Epic: Sessions UI integration (daemon ↔ UI)","description":"Context:\\n\\n- The daemon + CLI session system is implemented, but it is not surfaced in the GUI. Session badges exist in markdown, deep links exist, but there is no cohesive in-app session control.\\n\\nDone means:\\n\\n- Task list shows session status (Running/Waiting/Stopped).\\n- UI can Start/Continue/Stop sessions via a SessionClient.\\n- todos://session/<id> deep links route to the right UI action.\\n\\nVerification:\\n\\n- Manual: start a session from UI, detach/continue, see badge changes and attention indicators.\\n\\nRed-Green-Refactor plan:\\n\\n- Red: add a minimal integration test that proves Start/Stop updates markdown without clobber.\\n- Green: implement SessionClient + UI CTAs.\\n- Refactor: move daemon protocol glue behind a stable interface.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-05T15:35:20.601350Z","created_by":"cole","updated_at":"2026-02-05T20:39:53.633474Z","closed_at":"2026-02-05T20:39:53.633381Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-1kv","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:sessions","roadmap"]}
{"id":"bd-1kv.1","title":"Sessions: Implement SessionClient (daemon RPC bridge)","description":"Context:\\n\\n- The GUI currently relies on file watching to learn about session changes. We need a first-class client that can request actions (start/stop/continue/attach) and subscribe to daemon notifications.\\n\\nDone means:\\n\\n- Add a SessionClient module that can:\\n  - list sessions\\n  - start session for task\\n  - stop session\\n  - continue/attach\\n- Errors are mapped into user-visible messages (at least console + toast placeholder).\\n\\nVerification:\\n\\n- Manual: list sessions shows daemon state; start/stop works from UI.\\n- Automated: unit test that mocks the transport and verifies request/response shaping.\\n\\nRed-Green-Refactor plan:\\n\\n- Red: add a fake transport test with a few request/response cases.\\n- Green: implement minimal transport via a Tauri command that proxies to the daemon socket.\\n- Refactor: keep a single interface so we can swap transport (direct socket vs cli exec) if needed.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T15:36:49.492239Z","created_by":"cole","updated_at":"2026-02-05T18:52:54.575047Z","closed_at":"2026-02-05T18:52:54.574991Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-1kv.1","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:sessions"],"dependencies":[{"issue_id":"bd-1kv.1","depends_on_id":"bd-1kv","type":"parent-child","created_at":"2026-02-05T15:36:49.492239Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-1kv.2","title":"Sessions: Render session status + Start/Continue/Stop CTAs in TaskList","description":"Context:\\n\\n- Session badges exist in markdown parsing, but the UI does not surface them as interactive controls.\\n\\nDone means:\\n\\n- Task rows show a compact session pill (Running/Waiting/Stopped).\\n- When appropriate, show buttons:\\n  - Start (no session)\\n  - Continue (Running/Waiting/Stopped)\\n  - Stop (Running/Waiting)\\n- Buttons call SessionClient, not direct markdown edits.\\n\\nVerification:\\n\\n- Manual: start session from UI and see state update; stop session updates.\\n\\nRed-Green-Refactor plan:\\n\\n- Red: add a component test with mocked SessionClient returning session states.\\n- Green: implement UI component + wiring.\\n- Refactor: extract SessionPill component and keep TaskList readable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T15:36:59.046356Z","created_by":"cole","updated_at":"2026-02-05T19:01:14.499101Z","closed_at":"2026-02-05T19:01:14.499010Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-1kv.2","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:sessions","area:ui"],"dependencies":[{"issue_id":"bd-1kv.2","depends_on_id":"bd-1kv","type":"parent-child","created_at":"2026-02-05T15:36:59.046356Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-1kv.2","depends_on_id":"bd-1kv.1","type":"blocks","created_at":"2026-02-05T15:43:53.806251Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-1kv.3","title":"Sessions: Route todos://session/<id> deep links to Continue/Attach UX","description":"Context:\n\n- The deep-link plugin receives todos:// URLs and handleLink dispatches a DOM event, but nothing consumes it to actually focus/continue a session.\n\nDone means:\n\n- Add a single routing layer that:\n  - parses todos://session/<id>\n  - focuses the app window\n  - triggers a session action (open session list focused on id, or auto-continue)\n- Remove the temporary DOM CustomEvent approach (or make it an internal-only bridge).\n\nVerification:\n\n- Manual: on macOS run: open \"todos://session/42\" and confirm the app focuses and routes to session 42.\n\nRed-Green-Refactor plan:\n\n- Red: add a unit test for deep link parsing + routing dispatch.\n- Green: implement the router and wire to SessionClient.\n- Refactor: keep all deep link handling in one module (no scattered listeners).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T15:37:06.609704Z","created_by":"cole","updated_at":"2026-02-05T19:01:14.522464Z","closed_at":"2026-02-05T19:01:14.522404Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-1kv.3","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:sessions","area:ui"],"dependencies":[{"issue_id":"bd-1kv.3","depends_on_id":"bd-1kv","type":"parent-child","created_at":"2026-02-05T15:37:06.609704Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-1kv.3","depends_on_id":"bd-1kv.1","type":"blocks","created_at":"2026-02-05T15:43:53.830180Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-1kv.4","title":"Sessions: Add a session list surface (running/waiting/stopped)","description":"Context:\\n\\n- Without a dedicated surface, users can’t discover or manage sessions across tasks/projects, and attention events have nowhere to land.\\n\\nDone means:\\n\\n- Add a UI surface (panel/modal) listing sessions with status, task, project path.\\n- Selecting a session offers Continue/Stop actions.\\n\\nVerification:\\n\\n- Manual: open session list and manage at least one running + one stopped session.\\n\\nRed-Green-Refactor plan:\\n\\n- Red: define types and a mock list rendering test.\\n- Green: implement minimal UI with SessionClient.listSessions().\\n- Refactor: fold into app navigation pattern (avoid ad-hoc modals everywhere).","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-05T15:37:13.323499Z","created_by":"cole","updated_at":"2026-02-05T20:39:08.882987Z","closed_at":"2026-02-05T20:39:08.882924Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-1kv.4","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:sessions","area:ui"],"dependencies":[{"issue_id":"bd-1kv.4","depends_on_id":"bd-1kv","type":"parent-child","created_at":"2026-02-05T15:37:13.323499Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-1kv.4","depends_on_id":"bd-1kv.1","type":"blocks","created_at":"2026-02-05T15:43:53.852716Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-1lt","title":"Epic: Connected mode MVP (login + rooms + presence)","description":"Context:\n\n- We previously scoped login/rooms/presence as a possible direction.\n- Current product direction: keep Right Now local-first and avoid connected-mode complexity for now.\n\nDone means:\n\n- This epic is deferred and will not be worked on unless re-scoped explicitly.\n\nVerification:\n\n- br ready should not include connected-mode tasks.","status":"deferred","priority":2,"issue_type":"epic","created_at":"2026-02-05T15:35:29.919727Z","created_by":"cole","updated_at":"2026-02-05T16:48:12.800377Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-1lt","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:collab","auth","out-of-scope","roadmap"]}
{"id":"bd-1lt.1","title":"Connected: ADR - Pick auth/provider + backend approach","description":"Context:\\n\\n- Connected mode needs identity + rooms. Provider choice impacts OAuth flow, token storage, and how quickly we can ship.\\n\\nDone means:\\n\\n- Write a short ADR in docs/ that answers:\\n  - Which provider (Supabase/Clerk/Firebase/custom) and why\\n  - Auth flow (PKCE via deep link vs device code)\\n  - Token storage approach (keychain/stronghold)\\n  - Realtime transport (provider channels vs WebSocket server)\\n- Identify what data is stored (presence only vs sync).\\n\\nVerification:\\n\\n- Review: ADR is readable, has explicit decision + consequences + follow-up tasks.\\n\\nRed-Green-Refactor plan:\\n\\n- Red: list options + constraints.\\n- Green: pick one and record rationale.\\n- Refactor: reduce scope to presence-only MVP if needed.","status":"deferred","priority":1,"issue_type":"task","created_at":"2026-02-05T15:37:24.792185Z","created_by":"cole","updated_at":"2026-02-05T16:49:09.960006Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-1lt.1","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:collab","auth","design","out-of-scope"],"dependencies":[{"issue_id":"bd-1lt.1","depends_on_id":"bd-1lt","type":"parent-child","created_at":"2026-02-05T15:37:24.792185Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-1lt.2","title":"Connected: Secure token storage (OS keychain)","description":"Context:\\n\\n- We should not store auth tokens in ProjectStore.json. Tauri needs a Rust-side secret storage interface.\\n\\nDone means:\\n\\n- Add a Rust module that can set/get/delete secrets in OS keychain.\\n- Expose Tauri commands for AuthService to use (scoped, minimal surface).\\n- Include a way to clear all auth state on logout.\\n\\nVerification:\\n\\n- Manual: login stores token; restart app can read it; logout removes it.\\n\\nRed-Green-Refactor plan:\\n\\n- Red: create a stub command that fails and a frontend test that expects failure.\\n- Green: implement keychain integration for macOS first.\\n- Refactor: add platform abstraction and fallback strategy for dev/test.","status":"deferred","priority":1,"issue_type":"task","created_at":"2026-02-05T15:37:32.303495Z","created_by":"cole","updated_at":"2026-02-05T16:49:09.991669Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-1lt.2","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:collab","area:rust","auth","out-of-scope"],"dependencies":[{"issue_id":"bd-1lt.2","depends_on_id":"bd-1lt","type":"parent-child","created_at":"2026-02-05T15:37:32.303495Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-1lt.3","title":"Connected: Account UI surface (login/logout + status)","description":"Context:\\n\\n- Without a dedicated surface, auth flows become ad-hoc. We need a clear place for login, logout, and privacy toggles.\\n\\nDone means:\\n\\n- Add an Account/Connected section accessible from Planner (header button or settings panel).\\n- Shows: signed out vs signed in state, and a login/logout action.\\n- Includes placeholders for: share task text toggle, room membership.\\n\\nVerification:\\n\\n- Manual: open Account surface, sign in/out, see status update.\\n\\nRed-Green-Refactor plan:\\n\\n- Red: stub AuthService with fake user; write a component test.\\n- Green: implement UI and wiring.\\n- Refactor: keep auth state in atoms/services rather than threading props.","status":"deferred","priority":2,"issue_type":"task","created_at":"2026-02-05T15:37:38.914169Z","created_by":"cole","updated_at":"2026-02-05T16:49:10.017680Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-1lt.3","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:collab","area:ui","out-of-scope"],"dependencies":[{"issue_id":"bd-1lt.3","depends_on_id":"bd-1lt","type":"parent-child","created_at":"2026-02-05T15:37:38.914169Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-1lt.4","title":"Connected: Rooms UI (create/join) + fake in-memory provider","description":"Context:\\n\\n- We want to build the UX and state model before committing to a backend. A fake provider lets us test flows end-to-end in dev/test.\\n\\nDone means:\\n\\n- Implement a Rooms UI:\\n  - create room → shows code/link\\n  - join room via code\\n  - participant list\\n- Backed by an in-memory provider that simulates presence updates.\\n\\nVerification:\\n\\n- Manual: open two windows (or two app instances) and see simulated users/presence.\\n- Automated: unit test the reducer/state machine for room membership + presence list.\\n\\nRed-Green-Refactor plan:\\n\\n- Red: write tests for room join/leave + presence updates.\\n- Green: implement fake provider and UI.\\n- Refactor: define a stable interface so real backend can drop in.","status":"deferred","priority":2,"issue_type":"task","created_at":"2026-02-05T15:37:47.202938Z","created_by":"cole","updated_at":"2026-02-05T16:49:10.094625Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-1lt.4","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:collab","area:ui","out-of-scope"],"dependencies":[{"issue_id":"bd-1lt.4","depends_on_id":"bd-1lt","type":"parent-child","created_at":"2026-02-05T15:37:47.202938Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-1lt.5","title":"Connected: Publish presence from local work state (rate-limited)","description":"Context:\\n\\n- Presence must reflect planning/working/break and time remaining, without spamming the network or leaking task names by default.\\n\\nDone means:\\n\\n- Presence publisher subscribes to local events (state changes, coarse timer updates).\\n- Updates are rate-limited (e.g., every 15-30s max) and send minimal payload by default.\\n- Optional setting enables sharing current task text.\\n\\nVerification:\\n\\n- Manual: toggle between planning/working/break and verify other client updates within a few seconds.\\n- Automated: unit test rate-limiting behavior with TestClock.\\n\\nRed-Green-Refactor plan:\\n\\n- Red: add a test that asserts no more than N updates per minute.\\n- Green: implement publisher using EventBus.\\n- Refactor: keep privacy policy centralized (one module decides what can be shared).","status":"deferred","priority":3,"issue_type":"task","created_at":"2026-02-05T15:37:55.192192Z","created_by":"cole","updated_at":"2026-02-05T16:49:10.131689Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-1lt.5","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:collab","out-of-scope"],"dependencies":[{"issue_id":"bd-1lt.5","depends_on_id":"bd-1lt","type":"parent-child","created_at":"2026-02-05T15:37:55.192192Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-2di","title":"Epic: Packaging hardening (bundle daemon/CLI, deep links, no test harness)","description":"Context:\\n\\n- Release builds must consistently include the GUI + required sidecars (daemon/cli) and exclude dev/test-only artifacts. Today bundling can fail or accidentally include rn-test-harness.\\n\\nDone means:\\n\\n- tauri build bundles the right binaries/resources for release.\\n- Deep links work in release builds.\\n- CLI install/uninstall is predictable and documented.\\n\\nVerification:\\n\\n- Build a release DMG, install, run a smoke checklist (open project, start session, open deep link).\\n\\nRed-Green-Refactor plan:\\n\\n- Red: add a scripted smoke test for the built app bundle.\\n- Green: fix bundle config/resources.\\n- Refactor: document packaging assumptions in docs/.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-02-05T15:35:37.243056Z","created_by":"cole","updated_at":"2026-02-05T20:39:53.662522Z","closed_at":"2026-02-05T20:39:53.662443Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-2di","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:packaging","roadmap"]}
{"id":"bd-2di.1","title":"Packaging: Exclude rn-test-harness from release builds","description":"Context:\n\n- We observed that release bundling can try to copy rn-test-harness and fail if it was never built, and it can end up inside the shipped app bundle.\n\nDone means:\n\n- Release builds do not depend on building rn-test-harness.\n- rn-test-harness is not included in Right Now.app/Contents/MacOS.\n- Test-harness builds still work via the tauri.test.conf.json config + --features test-harness.\n\nVerification:\n\n- Delete target/release/rn-test-harness and run: bun run tauri build\n- Confirm the app bundles successfully and the resulting app does not contain rn-test-harness.\n\nRed-Green-Refactor plan:\n\n- Red: reproduce current bundling failure on a clean target.\n- Green: update bundle configuration/resources to include only intended sidecar binaries.\n- Refactor: document the build matrix (release vs test harness).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T15:41:01.491195Z","created_by":"cole","updated_at":"2026-02-05T18:52:54.596292Z","closed_at":"2026-02-05T18:52:54.596234Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-2di.1","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:packaging"],"dependencies":[{"issue_id":"bd-2di.1","depends_on_id":"bd-2di","type":"parent-child","created_at":"2026-02-05T15:41:01.491195Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-2di.2","title":"Packaging: Bundle daemon + todo CLI intentionally","description":"Context:\n\n- The app relies on sidecar binaries (right-now-daemon, todo, todo-shim). Bundling/paths need to be explicit so release builds behave like dev.\n\nDone means:\n\n- Tauri bundle includes the required binaries (daemon + CLI) and they are discoverable at runtime.\n- CLI install/uninstall UX is documented and works for a default macOS setup.\n\nVerification:\n\n- Build DMG, install app, run the CLI install flow, and successfully start/continue/stop a session without dev tooling.\n\nRed-Green-Refactor plan:\n\n- Red: write a smoke checklist that fails on a clean machine/profile.\n- Green: update bundle resources + runtime path resolution.\n- Refactor: centralize \"where are my sidecars\" logic in one module.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T15:41:17.067100Z","created_by":"cole","updated_at":"2026-02-05T20:39:08.854700Z","closed_at":"2026-02-05T20:39:08.854632Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-2di.2","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:packaging"],"dependencies":[{"issue_id":"bd-2di.2","depends_on_id":"bd-2di","type":"parent-child","created_at":"2026-02-05T15:41:17.067100Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-2di.3","title":"Packaging: Add scripted post-build smoke test","description":"Context:\n\n- Packaging regressions are easy to miss (missing sidecar, deep links, wrong capabilities). We need a repeatable smoke test that runs after building.\n\nDone means:\n\n- A script exists (script/ or test/) that:\n  - builds the app\n  - installs/copies it into a temp location\n  - launches it (or validates the bundle contents)\n  - verifies sidecars exist and deep link scheme is configured\n\nVerification:\n\n- Run the smoke script locally and see it fail when a sidecar binary is missing.\n\nRed-Green-Refactor plan:\n\n- Red: implement the script with at least one failing assertion today.\n- Green: make it pass by fixing bundle config.\n- Refactor: integrate into CI if/when we add CI builds.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-05T15:41:23.163001Z","created_by":"cole","updated_at":"2026-02-05T19:01:14.566913Z","closed_at":"2026-02-05T19:01:14.566854Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-2di.3","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:packaging","area:tests"],"dependencies":[{"issue_id":"bd-2di.3","depends_on_id":"bd-2di","type":"parent-child","created_at":"2026-02-05T15:41:23.163001Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-2g7","title":"Epic: Context Resurrection post-v1 (editor breadcrumbs + AI briefings)","description":"Context:\n\n- Tracks Context Resurrection work explicitly marked post-v1 in docs/2026-02-PLAN-CONTEXT-RESURRECTION.md (Phases 4-5).\n\nScope boundaries:\n\n- ✅ IN scope: Editor breadcrumbs (file list) and optional AI briefings provider interface.\n- ❌ OUT of scope: Anything required for CR v1 milestone.\n\n## Success Criteria\n\n- Minimal editor breadcrumb restore is implemented without destabilizing v1.\n- Briefings provider interface exists and remains opt-in.\n\nVerification:\n\n- bun run typecheck\n- bun run test:unit\n- cd src-tauri && cargo test","status":"deferred","priority":3,"issue_type":"epic","created_at":"2026-02-06T23:05:11.571085Z","created_by":"cole","updated_at":"2026-02-06T23:05:11.571085Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core","out-of-scope","roadmap"]}
{"id":"bd-2g7.1","title":"CR Phase 4: Editor breadcrumbs (file list)","description":"Context:\n\n- The plan describes a lightweight editor breadcrumb restore as Phase 4 (post-v1).\n\nScope boundaries:\n\n- ✅ IN scope: Add an optional editor.file_list field to snapshots and a UI action to open files (best-effort).\n- ❌ OUT of scope: VS Code extension and full editor session restoration.\n\n## Acceptance Criteria\n\n- Snapshot schema stores a small file list (manual or heuristic).\n- UI can render the list and attempt to open files via platform mechanisms.\n\nVerification:\n\n- Manual smoke: capture snapshot with file list and open files.","status":"deferred","priority":3,"issue_type":"task","created_at":"2026-02-06T23:05:11.605634Z","created_by":"cole","updated_at":"2026-02-06T23:05:11.605634Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:rust","area:ui","roadmap"],"dependencies":[{"issue_id":"bd-2g7.1","depends_on_id":"bd-2g7","type":"parent-child","created_at":"2026-02-06T23:05:11.605634Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-2g7.2","title":"CR Phase 5: AI briefings provider interface (opt-in)","description":"Context:\n\n- AI briefings are explicitly post-v1 and optional (plan ADR-005, Phase 5).\n\nScope boundaries:\n\n- ✅ IN scope: Define a provider interface and an opt-in toggle with clear disclosure.\n- ❌ OUT of scope: Shipping a default model/provider in v1.\n\n## Acceptance Criteria\n\n- Provider interface exists and is off by default.\n- Disclosure clearly describes what data is sent where.\n\nVerification:\n\n- N/A (design scaffold only)","status":"deferred","priority":4,"issue_type":"task","created_at":"2026-02-06T23:05:11.641330Z","created_by":"cole","updated_at":"2026-02-06T23:05:11.641330Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["design","out-of-scope","roadmap"],"dependencies":[{"issue_id":"bd-2g7.2","depends_on_id":"bd-2g7","type":"parent-child","created_at":"2026-02-06T23:05:11.641330Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-gzh","title":"Epic: Local v0.2 cohesive UX","description":"Context:\n\n- The current app has strong core tech (markdown parsing, watcher, atomic writes) but needs a cohesive onboarding flow and durable timer state.\n- The Planner is intentionally a read-only lens (editing happens in the user's editor), but the app should support lightweight 'Now' actions and session visibility.\n\nDone means:\n\n- Welcome/project picker is first-class (recent projects, open/create, and a walkthrough that explains the model).\n- Work/break state can persist across restarts.\n- Sessions are visible and the UI is ready to surface controls (via the sessions epic).\n\nVerification:\n\n- Manual smoke: launch → open recent project → understand model → start/stop timer → edit file externally and see UI react.\n\nRed-Green-Refactor plan:\n\n- Red: add failing E2E tests for each missing flow.\n- Green: implement smallest UI + persistence to pass.\n- Refactor: extract components/services to keep App.tsx small.","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-05T15:35:12.766031Z","created_by":"cole","updated_at":"2026-02-05T21:04:25.128822Z","closed_at":"2026-02-05T21:04:25.128692Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-gzh","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:ui","roadmap"]}
{"id":"bd-gzh.1","title":"Welcome: Show recent projects and open directly","description":"Context:\\n\\n- Current AppNoProject only shows an Open button and the app always drives a file dialog. This blocks fast repeat usage.\\n\\nDone means:\\n\\n- Welcome screen lists recent project paths from ProjectStore.\\n- Clicking a recent project loads it without showing a dialog.\\n- Still offer an \"Open…\" button to browse.\\n\\nVerification:\\n\\n- Manual: open two projects, relaunch, verify both show in recent list and open correctly.\\n- Automated: add a unit test for ProjectStore ordering + a component test for rendering recents (if we add RTL/Vitest) OR an E2E harness test that asserts recents UI.\\n\\nRed-Green-Refactor plan:\\n\\n- Red: write a failing test that expects at least one recent project item.\\n- Green: implement minimal Welcome UI + load action.\\n- Refactor: extract Welcome into its own component and keep App.tsx thin.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T15:35:54.555928Z","created_by":"cole","updated_at":"2026-02-05T20:39:08.813118Z","closed_at":"2026-02-05T20:39:08.813038Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-gzh.1","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:ui"],"dependencies":[{"issue_id":"bd-gzh.1","depends_on_id":"bd-gzh","type":"parent-child","created_at":"2026-02-05T15:35:54.555928Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-gzh.2","title":"Startup: Auto-load last active project without prompting","description":"Context:\\n\\n- main.tsx currently calls projectManager.openProject(lastProject) which still opens a dialog. The intended UX is: if the last project still exists, just open it.\\n\\nDone means:\\n\\n- On launch, if ProjectStore.lastActiveProject exists and is readable, the app loads it directly via ProjectManager.loadProject().\\n- If it fails (missing file, permissions), fall back to Welcome/project picker with a clear error.\\n\\nVerification:\\n\\n- Manual: set lastActiveProject, relaunch, ensure it loads without dialog. Rename/delete file, relaunch, ensure fallback UI appears.\\n\\nRed-Green-Refactor plan:\\n\\n- Red: add an integration test for init path using the test harness (fixture project + stored lastActiveProject).\\n- Green: implement conditional direct load.\\n- Refactor: move startup logic into a small \"bootstrap\" module.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T15:36:01.928436Z","created_by":"cole","updated_at":"2026-02-05T18:52:54.528034Z","closed_at":"2026-02-05T18:52:54.527750Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-gzh.2","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core","area:ui"],"dependencies":[{"issue_id":"bd-gzh.2","depends_on_id":"bd-gzh","type":"parent-child","created_at":"2026-02-05T15:36:01.928436Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-gzh.3","title":"Project picker: Support opening a TODO.md file directly","description":"Context:\\n\\n- ProjectManager.handleFolderOrFile supports file paths, but the dialog is configured as folder-only (directory: true).\\n\\nDone means:\\n\\n- The picker supports both \"Open folder\" and \"Open file\" paths (either separate buttons or a single dialog config that allows both if supported).\\n- Selecting a file loads it as the project file.\\n\\nVerification:\\n\\n- Manual: choose a TODO.md file; app loads it and watcher updates work.\\n\\nRed-Green-Refactor plan:\\n\\n- Red: add an E2E test in the harness that invokes ProjectManager.loadProject with an absolute file fixture.\\n- Green: implement UI/picker changes.\\n- Refactor: make the picker logic explicit (two actions) rather than implicit magic.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T15:36:10.320155Z","created_by":"cole","updated_at":"2026-02-05T19:01:14.543725Z","closed_at":"2026-02-05T19:01:14.543662Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-gzh.3","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:ui"],"dependencies":[{"issue_id":"bd-gzh.3","depends_on_id":"bd-gzh","type":"parent-child","created_at":"2026-02-05T15:36:10.320155Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-gzh.4","title":"Onboarding: Walkthrough explains how Right Now works","description":"Context:\n\n- Project picking is strong, but the app's core model is not explicit. Users need to understand: edit in your editor; Right Now is a lens + timer + sessions surface.\n\nDone means:\n\n- A short walkthrough exists (first run + reopenable) that explains:\n  - TODO.md is the source of truth\n  - edit tasks in your preferred editor\n  - the app reacts live via file watching\n  - sessions show up as badges and deep links\n- Walkthrough can be dismissed and does not block normal use.\n\nVerification:\n\n- Manual: fresh profile shows walkthrough once; it can be reopened later.\n\nRed-Green-Refactor plan:\n\n- Red: add a failing UI test that expects the walkthrough to render on first run.\n- Green: implement minimal walkthrough component + store flag.\n- Refactor: keep copy in one place and avoid coupling to App.tsx.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-05T15:36:17.185054Z","created_by":"cole","updated_at":"2026-02-05T20:50:54.068703Z","closed_at":"2026-02-05T20:50:54.068603Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-gzh.4","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:markdown","area:ui"],"dependencies":[{"issue_id":"bd-gzh.4","depends_on_id":"bd-gzh","type":"parent-child","created_at":"2026-02-05T15:36:17.185054Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-gzh.5","title":"Editor ergonomics: Make 'open in editor' the primary workflow","description":"Context:\n\n- Task editing inside the app is intentionally limited. To keep the app lightweight, users should jump to their editor quickly and predictably.\n\nDone means:\n\n- The UI clearly nudges and supports the external-editor workflow:\n  - prominent 'Open TODO file' action\n  - optional: reveal in Finder, copy path\n- Tracker mode should also expose the same 'open' affordance (if not already).\n\nVerification:\n\n- Manual: from Welcome/Planner/Tracker, user can open the TODO file quickly and sees edits reflected back in the app.\n\nRed-Green-Refactor plan:\n\n- Red: add a small test (or manual checklist) that enumerates the supported editor actions per surface.\n- Green: implement missing buttons/commands.\n- Refactor: centralize editor-related actions in one helper/service.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T15:36:25.172417Z","created_by":"cole","updated_at":"2026-02-05T21:03:55.391246Z","closed_at":"2026-02-05T21:03:55.391189Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-gzh.5","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:markdown","area:ui"],"dependencies":[{"issue_id":"bd-gzh.5","depends_on_id":"bd-gzh","type":"parent-child","created_at":"2026-02-05T15:36:25.172417Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-gzh.6","title":"Reorder (nuanced): Move entire heading sections up/down","description":"Context:\n\n- Reordering could be valuable, but per-task reordering risks breaking the markdown's structure and details blocks. If we reorder, it should likely be at the section/heading level.\n\nDone means:\n\n- Provide UI affordances to move a whole heading section up/down.\n- Moving a section preserves:\n  - the heading\n  - all tasks under that heading\n  - any intervening unrecognized markdown blocks that belong to that section\n- No per-task reorder is introduced in this iteration.\n\nVerification:\n\n- Manual: reorder two sections and verify the TODO.md remains readable and stable.\n- Unit: snapshot test for section-move logic with headings + details + unrecognized blocks.\n\nRed-Green-Refactor plan:\n\n- Red: write a failing unit test demonstrating correct section movement.\n- Green: implement a pure section-move helper in ProjectStateEditor.\n- Refactor: keep the UI thin and the transformation logic well-tested.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-05T15:36:31.682672Z","created_by":"cole","updated_at":"2026-02-05T20:56:29.349457Z","closed_at":"2026-02-05T20:56:29.349331Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-gzh.6","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:markdown","area:ui"],"dependencies":[{"issue_id":"bd-gzh.6","depends_on_id":"bd-gzh","type":"parent-child","created_at":"2026-02-05T15:36:31.682672Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-gzh.7","title":"State: Persist work/break state + timestamps in frontmatter","description":"Context:\\n\\n- WorkState/stateTransitions are ephemeral only. Restart loses timer state and breaks the ‘tracker as ambient metronome’ promise.\\n\\nDone means:\\n\\n- Frontmatter includes current state + transition timestamps (schema can change freely).\\n- On load, ProjectManager restores stateTransitions and workState from frontmatter when present.\\n- StateControls updates both in-memory and file state.\\n\\nVerification:\\n\\n- Manual: start work, quit, reopen, ensure timer resumes correctly.\\n- Unit: ProjectStateEditor parse/update round-trip tests for the new fields.\\n\\nRed-Green-Refactor plan:\\n\\n- Red: add a unit test asserting persisted timestamps survive update().\\n- Green: implement persistence wiring.\\n- Refactor: isolate durable vs ephemeral state clearly (types + docs).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T15:36:39.345175Z","created_by":"cole","updated_at":"2026-02-05T18:52:54.552858Z","closed_at":"2026-02-05T18:52:54.552800Z","external_ref":"2026-02-PLAN-HOLISTIC-ROADMAP.md#bd-gzh.7","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core","area:markdown"],"dependencies":[{"issue_id":"bd-gzh.7","depends_on_id":"bd-gzh","type":"parent-child","created_at":"2026-02-05T15:36:39.345175Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85","title":"Epic: Context Resurrection v1 (snapshots + Resurrection Card)","description":"Context:\n\n- Implements Context Resurrection (CR) v1 for Right Now.\n- Source of truth plan: docs/2026-02-PLAN-CONTEXT-RESURRECTION.md.\n- CR must work when the UI is closed: daemon captures + persists snapshots; UI only queries and renders.\n\nScope boundaries:\n\n- ✅ IN scope: Plan Phases 0-3 + deletion controls + retention (no AI).\n- ❌ OUT of scope: Editor breadcrumbs (Phase 4) and AI briefings (Phase 5) are tracked separately (post-v1).\n\n## Success Criteria\n\n- Stable task ID tokens exist and are preserved: `[abc.derived-label]`.\n- Frontmatter pointer is persisted and used: `right_now.active_task_id`.\n- Daemon captures snapshots on session transitions + stop + idle timeout.\n- Terminal tail is sanitized before any disk write.\n- Snapshot storage is atomic and uses strict permissions (0600/0700).\n- UI shows a Resurrection Card sourced from daemon snapshots.\n- Notes to future self are supported (manual snapshot capture with note).\n- Users can delete CR data per-task and per-project.\n- Retention/pruning prevents unbounded growth.\n\nVerification:\n\n- bun run typecheck\n- bun run test:unit\n- cd src-tauri && cargo test\n- Manual smoke:\n  - start a session, produce output, stop it, confirm snapshot exists under ~/.right-now/context-resurrection/\n  - close UI, run session transitions, reopen UI and confirm card appears\n  - add a note, confirm it persists in a new manual snapshot\n  - delete task/project context, confirm files are removed\n\nRed-Green-Refactor plan:\n\n- Red: add/extend unit tests for parsing, store behavior, and UI selectors.\n- Green: implement the smallest changes to satisfy acceptance criteria.\n- Refactor: consolidate helpers/regexes and tighten interfaces.","status":"open","priority":1,"issue_type":"epic","created_at":"2026-02-06T23:00:12.506237Z","created_by":"cole","updated_at":"2026-02-06T23:00:12.506237Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core","area:markdown","area:rust","area:sessions","area:tests","area:ui"]}
{"id":"bd-q85.1","title":"CR: Decide task ID assignment UX + slug rules","description":"Context:\n\n- CR relies on stable task identity across renames: `[abc.derived-label]` (plan §1.1 / ADR-001).\n- We need a clear UX decision for when IDs get assigned (lazy vs bulk), and a final spec for slug derivation.\n\nScope boundaries:\n\n- ✅ IN scope: Decide + document slug rules and assignment UX; update docs/2026-02-PLAN-CONTEXT-RESURRECTION.md accordingly.\n- ✅ IN scope: Add/adjust unit tests that lock the chosen behavior.\n- ❌ OUT of scope: Implementing full TS/Rust parsing/writing (separate beads).\n\n## Acceptance Criteria\n\n- The repo has a single documented decision for ID assignment UX (lazy on interaction vs bulk action), including when it triggers writes to TODO.md.\n- Slug/label derivation rules are documented (allowed chars, lowercasing, hyphenation) and aligned with the canonical regex in the plan.\n- At least one unit test (TS) locks the chosen slug behavior so future changes are intentional.\n\nVerification:\n\n- bun run test:unit\n\nRed-Green-Refactor plan:\n\n- Red: add failing test(s) for slug derivation / assignment trigger behavior.\n- Green: implement the minimal helper(s) / doc updates to make tests pass.\n- Refactor: centralize constants/regexes used by generator.","status":"closed","priority":2,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:09.945684Z","created_by":"cole","updated_at":"2026-02-07T02:19:23.038521Z","closed_at":"2026-02-07T02:19:23.038323Z","close_reason":"Document + lock task ID slug rules and decide lazy ID assignment; auto-assign on session start","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:markdown","area:ui","design"],"dependencies":[{"issue_id":"bd-q85.1","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:09.945684Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.10","title":"CR Phase 1: Retention/pruning + delete APIs (flock coordinated)","description":"Context:\n\n- CR must not grow without bound; users also need explicit deletion controls (plan §1.3.2, §0.13.3, X.2).\n- Pruning must not race with capture; lock coordination is required.\n\nScope boundaries:\n\n- ✅ IN scope: SnapshotStore retention/pruning rules + per-task lock (flock on .lock file) per plan §1.3.2.\n- ✅ IN scope: delete APIs: per-task and per-project.\n- ✅ IN scope: unit tests that simulate multiple snapshots and verify pruning + delete.\n- ❌ OUT of scope: UI deletion surfaces (separate bead).\n\n## Acceptance Criteria\n\n- Pruning retains last N snapshots per task (default 5) and deletes older ones.\n- Pruning and delete operations take an exclusive per-task lock before deleting.\n- Store exposes delete_task(project, task_id) and delete_project(project) and returns deleted counts.\n- Unit tests cover pruning behavior and lock coordination (best-effort).\n\nVerification:\n\n- cd src-tauri && cargo test\n\nRed-Green-Refactor plan:\n\n- Red: add tests that create 6+ snapshots and assert only last 5 remain.\n- Green: implement prune + delete with locking.\n- Refactor: keep file operations centralized.","status":"closed","priority":2,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.247731Z","created_by":"cole","updated_at":"2026-02-07T01:19:18.879760Z","closed_at":"2026-02-07T01:19:18.879714Z","close_reason":"Implemented SnapshotStore retention/prune + delete APIs with per-task flock lock","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:rust","area:tests"],"dependencies":[{"issue_id":"bd-q85.10","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.247731Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.10","depends_on_id":"bd-q85.8","type":"blocks","created_at":"2026-02-06T23:05:10.880591Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.11","title":"CR Phase 1: Terminal tail sanitizer + unit tests","description":"Context:\n\n- Terminal output often contains secrets; CR must not persist them verbatim (plan §0.13.1).\n\nScope boundaries:\n\n- ✅ IN scope: Implement sanitize_terminal_output() in src-tauri/src/context_resurrection/capture.rs (or helper).\n- ✅ IN scope: Unit tests for redacting common patterns (API_KEY=..., password:, Bearer ..., PEM private keys, AWS keys).\n- ❌ OUT of scope: UI disclosure copy (separate docs bead).\n\n## Acceptance Criteria\n\n- Sanitizer runs before any snapshot tail is written to disk.\n- Sanitizer replaces matched secrets with [REDACTED] (best-effort heuristic).\n- Unit tests cover each initial pattern class and a \"no redaction\" case.\n\nVerification:\n\n- cd src-tauri && cargo test\n\nRed-Green-Refactor plan:\n\n- Red: add failing sanitizer tests.\n- Green: implement regex-based redaction.\n- Refactor: make pattern list data-driven and easy to extend.","status":"closed","priority":1,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.280045Z","created_by":"cole","updated_at":"2026-02-07T00:52:35.201886Z","closed_at":"2026-02-07T00:52:35.201870Z","close_reason":"Implemented terminal tail sanitizer + unit tests","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:rust","area:tests"],"dependencies":[{"issue_id":"bd-q85.11","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.280045Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.11","depends_on_id":"bd-q85.7","type":"blocks","created_at":"2026-02-06T23:05:10.912229Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.12","title":"CR Phase 1: Implement SessionProvider for CR capture","description":"Context:\n\n- capture.rs must not reach into session internals directly; it depends on a SessionProvider trait (plan §0.5.3).\n- CR capture needs: status, exit_code, last_attention, and a recent output tail.\n\nScope boundaries:\n\n- ✅ IN scope: Implement SessionProvider for the existing session manager/runtime.\n- ✅ IN scope: Provide tail output for a session (best-effort, bounded size).\n- ❌ OUT of scope: SnapshotStore and UI.\n\n## Acceptance Criteria\n\n- SessionProvider implementation can return SessionSnapshot { status, exit_code, last_attention, tail } for a given session_id.\n- Tail collection is bounded (e.g., last N bytes) and safe to call during capture triggers.\n- If a session is missing, provider returns None without panicking.\n\nVerification:\n\n- cd src-tauri && cargo test\n\nRed-Green-Refactor plan:\n\n- Red: add a unit/integration test using a fake session manager or test harness.\n- Green: implement minimal provider using existing ring buffer/tail mechanisms.\n- Refactor: keep provider interface stable and avoid leaking session internals.","status":"closed","priority":2,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.313046Z","created_by":"cole","updated_at":"2026-02-07T01:00:14.427262Z","closed_at":"2026-02-07T01:00:14.427246Z","close_reason":"Implemented SessionProvider for CR capture (daemon impl + tests)","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:rust","area:sessions"],"dependencies":[{"issue_id":"bd-q85.12","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.313046Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.12","depends_on_id":"bd-q85.7","type":"blocks","created_at":"2026-02-06T23:05:10.942592Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.13","title":"CR Phase 1: CaptureService capture_now + dedup/rate-limit","description":"Context:\n\n- The daemon must capture snapshots on session lifecycle transitions and on demand (plan §1.4, §1.3.3, X.2).\n- Captures must be sanitized, atomic, and avoid thrash via dedup + rate limiting.\n\nScope boundaries:\n\n- ✅ IN scope: src-tauri/src/context_resurrection/capture.rs: CaptureService.capture_now().\n- ✅ IN scope: Per-task lock coordination + dedup window + rate limiting per plan §1.3.3.\n- ✅ IN scope: Unit tests for dedup + rate-limit behavior.\n- ❌ OUT of scope: Hooking triggers in session watcher (separate bead) and UI.\n\n## Acceptance Criteria\n\n- capture_now(project_path, task_id, reason, user_note?) writes a ContextSnapshotV1 JSON via SnapshotStore.\n- Tail is obtained via SessionProvider and sanitized before persistence.\n- Capture coordination: per-task flock (with timeout), 5s dedup window (task_id+reason), and 2s per-task rate limit.\n- Unit tests cover at least: dedup window and rate limit (lock timeout best-effort).\n\nVerification:\n\n- cd src-tauri && cargo test\n\nRed-Green-Refactor plan:\n\n- Red: add failing tests for dedup/rate-limit.\n- Green: implement minimal in-memory tracking and locking.\n- Refactor: isolate time sources for testability.","status":"closed","priority":2,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.345Z","created_by":"cole","updated_at":"2026-02-07T01:07:33.966987Z","closed_at":"2026-02-07T01:07:33.966965Z","close_reason":"Implemented CaptureService.capture_now with flock lock, dedup/rate-limit, sanitizer integration + tests","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:rust","area:sessions","area:tests"],"dependencies":[{"issue_id":"bd-q85.13","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.345Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.13","depends_on_id":"bd-q85.11","type":"blocks","created_at":"2026-02-06T23:05:11.007729Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.13","depends_on_id":"bd-q85.12","type":"blocks","created_at":"2026-02-06T23:05:11.039924Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.13","depends_on_id":"bd-q85.6","type":"blocks","created_at":"2026-02-06T23:05:11.069780Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.13","depends_on_id":"bd-q85.8","type":"blocks","created_at":"2026-02-06T23:05:10.976264Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.14","title":"CR Phase 1: Daemon protocol + CR query/capture handlers","description":"Context:\n\n- UI needs a stable daemon API to query and trigger captures (plan §0.9 / §0.9.1).\n\nScope boundaries:\n\n- ✅ IN scope: Extend daemon request/response protocol with CR endpoints: CrLatest/CrList/CrGet/CrCaptureNow/CrDeleteTask/CrDeleteProject.\n- ✅ IN scope: Implement query.rs handler that calls SnapshotStore + CaptureService.\n- ✅ IN scope: Wire handlers into the daemon request dispatch.\n- ❌ OUT of scope: UI client/types (separate bead) and capture triggers.\n\n## Acceptance Criteria\n\n- Protocol enums include CR requests and responses and serialize deterministically.\n- CR requests are handled end-to-end: request → handler → store/capture → response.\n- Delete endpoints return a deleted_count.\n- Error/degraded cases are handled without crashing the daemon.\n\nVerification:\n\n- cd src-tauri && cargo test\n\nRed-Green-Refactor plan:\n\n- Red: add a handler-level unit test with a temp SnapshotStore.\n- Green: implement minimal request routing.\n- Refactor: keep request parsing and business logic separate.","status":"closed","priority":1,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.380013Z","created_by":"cole","updated_at":"2026-02-07T01:27:16.543677Z","closed_at":"2026-02-07T01:27:16.543655Z","close_reason":"Expose CR snapshot query/capture/delete RPCs via daemon protocol + handlers","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core","area:rust"],"dependencies":[{"issue_id":"bd-q85.14","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.380013Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.14","depends_on_id":"bd-q85.10","type":"blocks","created_at":"2026-02-06T23:05:11.131307Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.14","depends_on_id":"bd-q85.13","type":"blocks","created_at":"2026-02-06T23:05:11.162286Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.14","depends_on_id":"bd-q85.9","type":"blocks","created_at":"2026-02-06T23:05:11.100627Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.15","title":"CR Phase 1: Capture triggers (session transitions + stopped + idle)","description":"Context:\n\n- v1 requires daemon-driven captures on session transitions, stop, and idle timeout (plan §1.4).\n\nScope boundaries:\n\n- ✅ IN scope: Integrate CaptureService into existing session lifecycle / polling loop.\n- ✅ IN scope: Trigger reasons: session_running/session_waiting/session_stopped/idle_timeout.\n- ❌ OUT of scope: UI Resurrection Card.\n\n## Acceptance Criteria\n\n- Captures occur on:\n  - Running ↔ Waiting transitions\n  - any → Stopped\n  - idle timeout (configurable default, e.g., 10m)\n- Captures use task_id as the join key (requires the session protocol carry task_id).\n- Trigger logic is rate-limited/deduped via CaptureService (no thrash).\n\nVerification:\n\n- cd src-tauri && cargo test\n\nRed-Green-Refactor plan:\n\n- Red: add a small unit/integration test that simulates a state transition and asserts capture was invoked.\n- Green: wire triggers to CaptureService.\n- Refactor: keep trigger policy centralized and configurable.","status":"closed","priority":2,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.412392Z","created_by":"cole","updated_at":"2026-02-07T01:19:18.905531Z","closed_at":"2026-02-07T01:19:18.905515Z","close_reason":"Wired daemon capture triggers on transitions/stop/idle + integration tests","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:rust","area:sessions"],"dependencies":[{"issue_id":"bd-q85.15","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.412392Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.15","depends_on_id":"bd-q85.13","type":"blocks","created_at":"2026-02-06T23:05:11.193839Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.15","depends_on_id":"bd-q85.6","type":"blocks","created_at":"2026-02-06T23:05:11.224719Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.16","title":"CR Phase 2: TS CR types + CrClient wrapper","description":"Context:\n\n- UI needs a thin, typed client to call daemon CR endpoints (plan §0.9.1, X.3).\n\nScope boundaries:\n\n- ✅ IN scope: src/lib/context-resurrection/types.ts with request/response and ContextSnapshotV1 types.\n- ✅ IN scope: src/lib/context-resurrection/client.ts transport wrapper returning Result-style errors.\n- ❌ OUT of scope: React components and selectors.\n\n## Acceptance Criteria\n\n- TS types mirror daemon protocol for CR endpoints.\n- CrClient exposes: latest(), list(), get(), captureNow(), deleteTask(), deleteProject().\n- Client handles daemon-unavailable gracefully (returns typed error, no crash).\n\nVerification:\n\n- bun run typecheck\n- bun run test:unit\n\nRed-Green-Refactor plan:\n\n- Red: add unit tests with a mocked transport.\n- Green: implement minimal client + types.\n- Refactor: isolate transport concerns from selectors/components.","status":"closed","priority":2,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.445930Z","created_by":"cole","updated_at":"2026-02-07T01:33:10.745186Z","closed_at":"2026-02-07T01:33:10.744986Z","close_reason":"Add TS CR snapshot/types + transport-agnostic CrClient with unit tests","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core","area:ui"],"dependencies":[{"issue_id":"bd-q85.16","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.445930Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.16","depends_on_id":"bd-q85.14","type":"blocks","created_at":"2026-02-06T23:05:11.255814Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.17","title":"CR Phase 2: Resurrection selectors + unit tests","description":"Context:\n\n- We want deterministic, testable logic for what the card shows and when it appears (plan §1.5, X.3).\n\nScope boundaries:\n\n- ✅ IN scope: src/lib/context-resurrection/selectors.ts: shouldShowCard() and selectCardData().\n- ✅ IN scope: Unit tests for edge cases (no snapshot, too-recent snapshot, daemon unavailable).\n- ❌ OUT of scope: React card component.\n\n## Acceptance Criteria\n\n- shouldShowCard(snapshot, lastActivity) implements the plan threshold logic and is unit-tested.\n- selectCardData(snapshot) produces a UI-friendly shape (tail excerpt, attention summary, timestamps).\n- Selector code does not depend on React.\n\nVerification:\n\n- bun run test:unit\n\nRed-Green-Refactor plan:\n\n- Red: add failing selector tests.\n- Green: implement selectors.\n- Refactor: keep selectors pure and minimal.","status":"closed","priority":2,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.480274Z","created_by":"cole","updated_at":"2026-02-07T01:36:05.364922Z","closed_at":"2026-02-07T01:36:05.364704Z","close_reason":"Add pure CR selectors for card eligibility + card display shaping with unit tests","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:tests","area:ui"],"dependencies":[{"issue_id":"bd-q85.17","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.480274Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.17","depends_on_id":"bd-q85.16","type":"blocks","created_at":"2026-02-06T23:05:11.287986Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.18","title":"CR Phase 2: ResurrectionCard React component","description":"Context:\n\n- The Resurrection Card is the v1 UI surface that shows \"where you left off\" (plan §0.8).\n\nScope boundaries:\n\n- ✅ IN scope: Add a ResurrectionCard component that renders snapshot data (task title, last active, attention, tail excerpt, note).\n- ✅ IN scope: Dismiss behavior and a non-blocking UI surface.\n- ❌ OUT of scope: Wiring it into project load and actions (separate bead).\n\n## Acceptance Criteria\n\n- A React component exists and can render a ContextSnapshotV1 (including missing optional fields).\n- Tail excerpt is bounded (e.g., last 20 lines) and rendered safely.\n- Card has a dismiss action and does not block editing.\n\nVerification:\n\n- bun run typecheck\n- bun run test:unit (component test if present) or manual smoke via dev server\n\nRed-Green-Refactor plan:\n\n- Red: add minimal render test (or story/test harness).\n- Green: implement component with basic styling.\n- Refactor: extract subcomponents for terminal/note sections.","status":"closed","priority":2,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.514379Z","created_by":"cole","updated_at":"2026-02-07T01:39:00.493213Z","closed_at":"2026-02-07T01:39:00.493188Z","close_reason":"Add ResurrectionCard component rendering snapshot context with dismiss + safe bounded tail","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:ui"],"dependencies":[{"issue_id":"bd-q85.18","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.514379Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.18","depends_on_id":"bd-q85.17","type":"blocks","created_at":"2026-02-06T23:05:11.318902Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.19","title":"CR Phase 2: Integrate card (eligibility + task action + resume)","description":"Context:\n\n- After project load, the app should decide whether to show the card for the active task and provide a reliable resume action (plan §1.5, §0.8).\n\nScope boundaries:\n\n- ✅ IN scope: Wire CrClient + selectors + ResurrectionCard into the project load flow.\n- ✅ IN scope: Add explicit \"Resume from snapshot\" task action + subtle indicator for tasks with snapshots.\n- ✅ IN scope: Implement \"Resume\" behavior: attach to session if running, otherwise show continue/restart path.\n- ❌ OUT of scope: Notes editor (separate bead).\n\n## Acceptance Criteria\n\n- On project load, UI queries daemon for latest snapshot for right_now.active_task_id (or fallback) and shows card when eligible.\n- UI handles daemon unavailable by showing an empty/disabled CR state (no crash).\n- Task list shows a \"has context\" indicator and explicit action to open the card.\n- Resume action routes to existing session attach/continue behavior.\n\nVerification:\n\n- bun run typecheck\n- bun run test:unit (selectors/client/integration tests where possible)\n- Manual: open app with existing snapshots and confirm card appears and resume works\n\nRed-Green-Refactor plan:\n\n- Red: add an integration-style unit test for eligibility flow (mock client).\n- Green: wire state + UI.\n- Refactor: keep load logic out of components where possible.","status":"closed","priority":2,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.548701Z","created_by":"cole","updated_at":"2026-02-07T02:02:54.734683Z","closed_at":"2026-02-07T02:02:54.734467Z","close_reason":"Wire CR daemon queries into project load, add task indicators + card resume flow","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core","area:sessions","area:ui"],"dependencies":[{"issue_id":"bd-q85.19","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.548701Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.19","depends_on_id":"bd-q85.16","type":"blocks","created_at":"2026-02-06T23:05:11.410918Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.19","depends_on_id":"bd-q85.18","type":"blocks","created_at":"2026-02-06T23:05:11.381656Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.19","depends_on_id":"bd-q85.5","type":"blocks","created_at":"2026-02-06T23:05:11.350390Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.2","title":"CR Phase 0: TS task ID tokens in ProjectStateEditor","description":"Context:\n\n- Phase 0 foundation for CR: TypeScript must parse/write stable task IDs and preserve them through edits (plan §1.1, §1.1.1).\n- TS is responsible for most TODO.md edits, so it must never clobber IDs or reorder them around session badges.\n\nScope boundaries:\n\n- ✅ IN scope: src/lib/ProjectStateEditor.ts parsing/writing of `[abc.derived-label]` tokens.\n- ✅ IN scope: ensureTaskId()/generator with collision avoidance (3 letters, 4-letter fallback).\n- ✅ IN scope: unit tests in src/lib/__tests__/ProjectStateEditor.test.ts.\n- ❌ OUT of scope: Rust markdown parser changes; daemon CR module; UI Resurrection Card.\n\n## Acceptance Criteria\n\n- ProjectStateEditor.parse extracts a `task_id` value from task lines that contain an ID token.\n- ProjectStateEditor.update preserves an existing ID token unchanged and keeps ordering: task text → ID token → session badge.\n- New IDs are generated with collision avoidance as per plan (§1.1): retry collisions, allow 4-letter prefix fallback.\n- Badge formatting/updating in TS preserves the ID token.\n- Unit tests cover: parse + round-trip + badge update preservation + collision avoidance.\n\nVerification:\n\n- bun run typecheck\n- bun run test:unit\n\nRed-Green-Refactor plan:\n\n- Red: add failing tests for parsing/writing ID tokens and badge preservation.\n- Green: implement minimal parser/writer + generator.\n- Refactor: share regex/constants and keep write logic stable.","status":"closed","priority":1,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:09.987395Z","created_by":"cole","updated_at":"2026-02-07T00:19:42.000560Z","closed_at":"2026-02-07T00:19:42.000387Z","close_reason":"Implemented TS task-id token parsing/writing + generator + tests","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:markdown","area:tests","area:ui"],"dependencies":[{"issue_id":"bd-q85.2","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:09.987395Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.20","title":"CR Phase 3: Notes to future self (manual snapshot capture)","description":"Context:\n\n- v1 supports \"notes to future self\" as a manual capture with reason=manual (plan §1.6, Phase 3).\n\nScope boundaries:\n\n- ✅ IN scope: UI note editor in the card; saving triggers CrCaptureNow with reason=manual and user_note.\n- ✅ IN scope: Display latest note prominently when present.\n- ❌ OUT of scope: Editor breadcrumbs and AI briefings.\n\n## Acceptance Criteria\n\n- User can type and save a note from the Resurrection Card.\n- Save triggers a new snapshot capture with user_note (reason=manual).\n- Latest snapshot/note is shown after save without requiring app restart.\n\nVerification:\n\n- bun run typecheck\n- bun run test:unit (mock client) and manual smoke\n\nRed-Green-Refactor plan:\n\n- Red: add failing UI/client test for captureNow(note).\n- Green: implement note editor + save flow.\n- Refactor: keep note state management isolated.","status":"closed","priority":2,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.585293Z","created_by":"cole","updated_at":"2026-02-07T02:08:38.334643Z","closed_at":"2026-02-07T02:08:38.334436Z","close_reason":"Add note editor in ResurrectionCard and save flow via CrCaptureNow","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core","area:ui"],"dependencies":[{"issue_id":"bd-q85.20","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.585293Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.20","depends_on_id":"bd-q85.19","type":"blocks","created_at":"2026-02-06T23:05:11.442393Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.21","title":"CR Ops: Forget task/project context (UI delete actions)","description":"Context:\n\n- Users must be able to delete CR data (plan §0.13.3, X.5).\n\nScope boundaries:\n\n- ✅ IN scope: UI actions to delete snapshots per-task and per-project via daemon endpoints.\n- ✅ IN scope: Update UI state after deletion (card hides, indicators update).\n- ❌ OUT of scope: Global deletion (user manually deletes ~/.right-now/context-resurrection/).\n\n## Acceptance Criteria\n\n- \"Forget this task's context\" deletes daemon snapshots for (project, task_id).\n- \"Forget project context\" deletes all snapshots for the project.\n- UI confirms deletion and updates indicators/card state.\n\nVerification:\n\n- bun run typecheck\n- Manual: create snapshots, delete them, confirm files removed from ~/.right-now/context-resurrection/\n\nRed-Green-Refactor plan:\n\n- Red: add a mocked-client test for delete flows.\n- Green: implement UI actions and wire to CrClient.\n- Refactor: centralize confirmation/toast patterns.","status":"closed","priority":3,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.620073Z","created_by":"cole","updated_at":"2026-02-07T02:12:47.178109Z","closed_at":"2026-02-07T02:12:47.177889Z","close_reason":"Add card actions to forget task/project CR context via delete endpoints + update UI state","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core","area:ui"],"dependencies":[{"issue_id":"bd-q85.21","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.620073Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.21","depends_on_id":"bd-q85.14","type":"blocks","created_at":"2026-02-06T23:05:11.504681Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.21","depends_on_id":"bd-q85.16","type":"blocks","created_at":"2026-02-06T23:05:11.473634Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.22","title":"CR Ops: Docs (storage, privacy, deletion) + smoke checklist","description":"Context:\n\n- CR stores terminal tails and notes on disk; users need clear disclosure and deletion instructions (plan §0.13).\n\nScope boundaries:\n\n- ✅ IN scope: Add/update docs that explain what CR captures, where it is stored, sanitization limits, and how to delete per-task/per-project/global.\n- ✅ IN scope: Add a short smoke checklist for release readiness.\n- ❌ OUT of scope: AI briefings docs (post-v1).\n\n## Acceptance Criteria\n\n- Documentation exists describing:\n  - storage location under ~/.right-now/context-resurrection/\n  - what data is captured (terminal tail, attention summary, note)\n  - sanitization is best-effort (do not paste secrets)\n  - deletion controls and manual global deletion\n- A smoke checklist exists and is easy to follow.\n\nVerification:\n\n- Read docs locally; ensure paths match implementation.\n\nRed-Green-Refactor plan:\n\n- Red: draft checklist first.\n- Green: write minimal docs.\n- Refactor: tighten wording after implementation stabilizes.","status":"closed","priority":3,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.655555Z","created_by":"cole","updated_at":"2026-02-07T02:21:04.212921Z","closed_at":"2026-02-07T02:21:04.212896Z","close_reason":"Add CR docs for storage, privacy/sanitization, deletion controls, and smoke checklist","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core"],"dependencies":[{"issue_id":"bd-q85.22","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.655555Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.22","depends_on_id":"bd-q85.21","type":"blocks","created_at":"2026-02-06T23:05:11.536728Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.23","title":"CR tech debt: Structured daemon error codes (Rust+TS)","description":"Context:\n\n- TS `CrClient` currently infers `not_found`/`skipped` by substring-matching daemon error strings, which is brittle and makes refactors risky.\n- Transport errors (timeouts / daemon not running) currently surface as thrown Tauri invoke errors, which makes UI error handling inconsistent.\n\nScope boundaries:\n\n- ✅ IN scope: `src-tauri/src/session/protocol.rs` (add `DaemonErrorCode` + `DaemonResponse::Error { code, message }`), daemon CR handlers (`right-now-daemon.rs`) returning correct codes, Tauri `cr_request` returning structured errors for transport failures, TS CR types/client mapping by `code`.\n- ❌ OUT of scope: protocol fixtures, handshake/version negotiation, storage dir split, UI refactors.\n\nDone means:\n\n- Rust: `DaemonResponse::Error` includes `{ code, message }` and CR endpoints return the right `code` for not-found and skipped cases.\n- Rust: `cr_request` does not throw for daemon connect failures / read timeouts; it returns `DaemonResponse::Error` with `code: daemon_unavailable` / `timeout`.\n- TS: `src/lib/context-resurrection/client.ts` uses `error.code` (no substring parsing) and tests cover the mapping.\n\nVerification:\n\n- `bun run test:unit`\n- `cd src-tauri && cargo test`\n\nRed-Green-Refactor plan:\n\n- Red: update TS unit tests to assert code-based mapping; see failures.\n- Green: implement Rust protocol + daemon/Tauri changes; update TS types + client mapping.\n- Refactor: remove any leftover message parsing and unify error handling paths.","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-07T04:04:37.561771Z","created_by":"cole","updated_at":"2026-02-07T04:04:37.561771Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:rust","area:ui"],"dependencies":[{"issue_id":"bd-q85.23","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-07T04:04:37.561771Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.24","title":"CR tech debt: Protocol fixtures + typed snapshot payload","description":"Context:\n\n- CR request/response JSON shapes are easy to accidentally drift between Rust and TS.\n- `DaemonResponse::CrSnapshot/CrSnapshots` currently ship `serde_json::Value`, losing compile-time guarantees.\n\nScope boundaries:\n\n- ✅ IN scope: CR protocol fixture files + tests (Rust + TS), switch CR snapshot payloads to typed `ContextSnapshotV1`, enforce `cr_list` limit semantics (default 100, clamp 500, invalid_request on <=0), and add exhaustive tests for the `cr_request` allowlist.\n- ❌ OUT of scope: handshake/version negotiation, storage dir split, UI refactors.\n\nDone means:\n\n- Shared fixtures exist under `test/fixtures/protocol/` and are read by:\n  - Rust integration test `src-tauri/tests/protocol_fixtures.rs`\n  - TS unit test `src/lib/context-resurrection/protocol-fixtures.test.ts`\n- Rust: `DaemonResponse::CrSnapshot/CrSnapshots` use typed `ContextSnapshotV1` (no `serde_json::Value`).\n- Rust: `CrList` enforces limit semantics (default/clamp/invalid) and has tests.\n- Rust: `cr_request` allowlist has exhaustive tests so non-CR variants are rejected.\n\nVerification:\n\n- `bun run test:unit`\n- `cd src-tauri && cargo test`\n\nRed-Green-Refactor plan:\n\n- Red: add fixtures + tests first; ensure they fail until implementation matches.\n- Green: implement typed payload + limit enforcement + allowlist tests.\n- Refactor: tighten fixture coverage to only the stable contract surface.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-07T04:04:37.587554Z","created_by":"cole","updated_at":"2026-02-07T04:04:37.704159Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:rust","area:ui"],"dependencies":[{"issue_id":"bd-q85.24","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-07T04:04:37.587554Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.24","depends_on_id":"bd-q85.23","type":"blocks","created_at":"2026-02-07T04:04:37.704135Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.25","title":"CR tech debt: Protocol handshake + IPC frame limits","description":"Context:\n\n- If an older daemon binary is still running, the app can connect but protocol mismatches may fail in confusing ways.\n- The IPC framing is newline-delimited JSON; without frame limits, malformed inputs could cause excessive memory use.\n\nScope boundaries:\n\n- ✅ IN scope: add protocol version handshake (client-enforced), implement `DaemonRequest::Handshake` / `DaemonResponse::Handshake`, surface `version_mismatch` as structured error, and enforce max request/response frame sizes.\n- ❌ OUT of scope: protocol fixtures expansion, storage dir split, UI refactors.\n\nDone means:\n\n- Rust protocol defines `PROTOCOL_VERSION: u32 = 1` and handshake request/response variants.\n- Rust clients (`src-tauri/src/session/daemon_client.rs`, `src-tauri/src/bin/todo.rs`) perform handshake before normal requests.\n- Version mismatch yields `DaemonResponse::Error { code: version_mismatch, message: <actionable> }`.\n- IPC max frame sizes are enforced (request <= 1MB, response <= 10MB) and failures return typed errors (`invalid_request` / `internal`).\n\nVerification:\n\n- `bun run test:unit`\n- `cd src-tauri && cargo test`\n\nRed-Green-Refactor plan:\n\n- Red: add unit tests for handshake + frame-size enforcement.\n- Green: implement handshake in daemon + clients; implement frame limits.\n- Refactor: centralize framing/limits logic to avoid duplication.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-07T04:04:37.613615Z","created_by":"cole","updated_at":"2026-02-07T04:04:37.725672Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core","area:rust"],"dependencies":[{"issue_id":"bd-q85.25","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-07T04:04:37.613615Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.25","depends_on_id":"bd-q85.23","type":"blocks","created_at":"2026-02-07T04:04:37.725649Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.26","title":"CR tech debt: Storage semantics split + secure socket","description":"Context:\n\n- On Linux, `Config::base_dir()` prefers `XDG_RUNTIME_DIR`, which is not guaranteed to persist across reboots.\n- CR snapshots and session persistence should be stored durably, while sockets/pids belong in a runtime directory.\n\nScope boundaries:\n\n- ✅ IN scope: split `Config` into `runtime_dir` vs `state_dir`, ensure sessions.json + CR snapshots use `state_dir`, secure socket permissions (`0700` dir + `0600` socket), update docs, and add config path-selection tests.\n- ❌ OUT of scope: protocol error codes/fixtures/handshake, UI refactors.\n\nDone means:\n\n- Rust: `src-tauri/src/session/config.rs` exposes `runtime_dir()` and `state_dir()` and uses them consistently.\n- Rust: daemon binds socket under `runtime_dir` with owner-only permissions.\n- Rust: SnapshotStore is rooted under `state_dir` (durable) and respects `RIGHT_NOW_DAEMON_DIR` override for dev/test.\n- Docs: `docs/context-resurrection.md` accurately describes per-platform storage + manual reset path.\n\nVerification:\n\n- `cd src-tauri && cargo test`\n- Manual: `ls -la` shows socket dir `0700` and socket file `0600`.\n- Manual: set `RIGHT_NOW_DAEMON_DIR` and confirm snapshots land under the override.\n\nRed-Green-Refactor plan:\n\n- Red: add failing config/path tests (Linux env table) and a doc check pass.\n- Green: implement runtime/state split + socket perms + SnapshotStore root update; update docs.\n- Refactor: reduce duplication in config path building and ensure all callsites use the new APIs.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-07T04:04:37.636852Z","created_by":"cole","updated_at":"2026-02-07T04:04:37.636852Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core","area:rust"],"dependencies":[{"issue_id":"bd-q85.26","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-07T04:04:37.636852Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.27","title":"CR tech debt: Extract CR controller from App.tsx","description":"Context:\n\n- `App.tsx` currently owns a lot of Context Resurrection state + side-effects, making it hard to reason about concurrency/cancellation and hard to unit test.\n\nScope boundaries:\n\n- ✅ IN scope: extract CR orchestration into a pure controller (`src/lib/context-resurrection/controller.ts`) + thin React hook (`use-cr-controller.ts`), update `App.tsx` to use it, and add unit tests for cancellation/last-call-wins.\n- ❌ OUT of scope: UI/UX changes, protocol changes, new CR features.\n\nDone means:\n\n- Controller exists and does not import React.\n- `App.tsx` no longer contains CR-specific request orchestration logic (pin/dismiss/load/retry); it delegates to the hook/controller.\n- Unit tests cover cancellation semantics and key flows (load, open task snapshot, capture note, forget task/project).\n\nVerification:\n\n- `bun run test:unit`\n- `bun run typecheck`\n\nRed-Green-Refactor plan:\n\n- Red: add controller tests for overlapping requests and cancellation.\n- Green: extract logic from `App.tsx` into controller + hook until tests pass.\n- Refactor: simplify state shape and remove duplication between helpers.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-07T04:04:37.659977Z","created_by":"cole","updated_at":"2026-02-07T04:04:37.767158Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:ui"],"dependencies":[{"issue_id":"bd-q85.27","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-07T04:04:37.659977Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.27","depends_on_id":"bd-q85.23","type":"blocks","created_at":"2026-02-07T04:04:37.746194Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.27","depends_on_id":"bd-q85.24","type":"blocks","created_at":"2026-02-07T04:04:37.767137Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.28","title":"CR tech debt: Daemon test reliability helper (assert_eventually)","description":"Context:\n\n- Daemon tests have had timing flakiness (subscription timing vs output emission) and ad-hoc sleeps/polls.\n\nScope boundaries:\n\n- ✅ IN scope: add a reusable `assert_eventually` async helper for tests, refactor daemon tests to use it (including attention summary tests), and add a regression test for the subscribe-late race.\n- ❌ OUT of scope: new daemon features, protocol changes.\n\nDone means:\n\n- New helper exists at `src-tauri/src/test_utils.rs` (test-only).\n- Existing flaky tests no longer rely on arbitrary sleeps.\n- `cargo test --bin right-now-daemon` is stable under repeated runs (local: 20x).\n\nVerification:\n\n- `cd src-tauri && cargo test --bin right-now-daemon`\n\nRed-Green-Refactor plan:\n\n- Red: add a regression test that demonstrates the race.\n- Green: implement `assert_eventually` and refactor tests.\n- Refactor: remove duplicated polling logic and standardize timeouts.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-07T04:04:37.682035Z","created_by":"cole","updated_at":"2026-02-07T04:04:37.682035Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:rust"],"dependencies":[{"issue_id":"bd-q85.28","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-07T04:04:37.682035Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.3","title":"CR Phase 0: Rust task ID tokens in session/markdown.rs","description":"Context:\n\n- The daemon updates session badges in TODO.md and must not break stable task IDs (plan §1.1).\n- Rust markdown parsing/updating must match TS semantics (plan §1.1.1 cross-language contract).\n\nScope boundaries:\n\n- ✅ IN scope: src-tauri/src/session/markdown.rs: parse task lines to extract `[abc.derived-label]` separately from name and session badge.\n- ✅ IN scope: ensure update_task_session_in_content() preserves ID tokens and can target the correct task when IDs exist.\n- ✅ IN scope: fix find_task_by_key() matching semantics so it does not rely on prefix-matching when an ID exists.\n- ✅ IN scope: add/extend Rust unit tests in markdown.rs.\n- ❌ OUT of scope: Context Resurrection snapshot store; UI features.\n\n## Acceptance Criteria\n\n- parse_task_line() extracts task_id token (3-4 letter prefix + derived label) when present.\n- update_task_session_in_content() preserves any existing ID token and keeps ordering (text → ID → badge).\n- Task lookup for badge updates prefers task_id when available (fallback to exact name match only if no ID is present).\n- Rust tests cover: parse with/without badge + with ID tokens + badge update preservation.\n\nVerification:\n\n- cd src-tauri && cargo test\n\nRed-Green-Refactor plan:\n\n- Red: add failing tests for ID parsing and badge updates preserving IDs.\n- Green: implement minimal regex extraction and update logic.\n- Refactor: consolidate regexes and make matching rules explicit.","status":"closed","priority":1,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.020769Z","created_by":"cole","updated_at":"2026-02-07T00:19:42.032836Z","closed_at":"2026-02-07T00:19:42.032820Z","close_reason":"Implemented Rust task-id token parsing/preservation + tests","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:markdown","area:rust","area:sessions","area:tests"],"dependencies":[{"issue_id":"bd-q85.3","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.020769Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.4","title":"CR Phase 0: Cross-language parity tests for task-id parsing","description":"Context:\n\n- The plan requires TS and Rust parsers to agree (plan §1.1.1) so badge updates and UI edits remain compatible.\n- A shared fixture prevents silent divergence.\n\nScope boundaries:\n\n- ✅ IN scope: Create a shared fixture file under test/fixtures/ and expected JSON output.\n- ✅ IN scope: Add TS unit test that parses the fixture and matches expected output.\n- ✅ IN scope: Add Rust unit test that parses the same fixture and matches expected output.\n- ❌ OUT of scope: Changing the grammar/regex (handled in other beads).\n\n## Acceptance Criteria\n\n- New fixture exists: test/fixtures/task-id-parsing.md with representative edge cases (3 vs 4-letter prefix, hyphens, badge present/absent).\n- Expected output exists (JSON) and is used by both TS and Rust tests.\n- TS + Rust tests fail if parsing diverges.\n\nVerification:\n\n- bun run test:unit\n- cd src-tauri && cargo test\n\nRed-Green-Refactor plan:\n\n- Red: add tests that assert fixture parsing equals expected JSON.\n- Green: wire parsers to produce matching output.\n- Refactor: keep fixture minimal but comprehensive.","status":"closed","priority":1,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.054059Z","created_by":"cole","updated_at":"2026-02-07T00:32:20.190762Z","closed_at":"2026-02-07T00:32:20.190496Z","close_reason":"Added shared task-id parsing fixture + TS/Rust parity tests","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:markdown","area:tests"],"dependencies":[{"issue_id":"bd-q85.4","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.054059Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.4","depends_on_id":"bd-q85.2","type":"blocks","created_at":"2026-02-06T23:05:10.688569Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.4","depends_on_id":"bd-q85.3","type":"blocks","created_at":"2026-02-06T23:05:10.721142Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.5","title":"CR Phase 0: Persist and use right_now.active_task_id","description":"Context:\n\n- CR must resurrect deterministically; relying on \"first incomplete task\" is not stable (ADR-002).\n- The plan requires a persisted frontmatter pointer: right_now.active_task_id.\n\nScope boundaries:\n\n- ✅ IN scope: UI reading and writing of frontmatter field right_now.active_task_id.\n- ✅ IN scope: Update initial active-task selection to prefer the pointer when valid.\n- ✅ IN scope: Unit tests around ProjectStateEditor/project loading that ensure external edits/reloads do not erase the pointer.\n- ❌ OUT of scope: Daemon writing frontmatter (explicitly forbidden in plan §0.12.1).\n\n## Acceptance Criteria\n\n- When a user selects/activates a task (or starts a session for it), the UI persists right_now.active_task_id to TODO.md frontmatter.\n- On project load, UI uses right_now.active_task_id if it points to an existing task; otherwise falls back gracefully.\n- File watcher reloads/external edits do not inadvertently clear or rewrite the pointer.\n\nVerification:\n\n- bun run typecheck\n- bun run test:unit\n\nRed-Green-Refactor plan:\n\n- Red: add failing tests for pointer persistence + reload behavior.\n- Green: implement minimal frontmatter read/write + selection logic.\n- Refactor: keep pointer updates isolated from unrelated markdown rewrites.","status":"closed","priority":1,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.087520Z","created_by":"cole","updated_at":"2026-02-07T00:46:26.634905Z","closed_at":"2026-02-07T00:46:26.634888Z","close_reason":"Persisted right_now.active_task_id and used it for current task selection","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:markdown","area:tests","area:ui"],"dependencies":[{"issue_id":"bd-q85.5","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.087520Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.6","title":"CR Phase 0: Propagate task_id through session protocol/persistence","description":"Context:\n\n- Sessions currently use task_key (task text) which breaks durable joins on rename.\n- CR snapshots are keyed by task_id; the daemon needs task_id during session lifecycle to capture and to update badges reliably.\n\nScope boundaries:\n\n- ✅ IN scope: Rust session protocol (src-tauri/src/session/protocol.rs): add task_id to Session + Start request.\n- ✅ IN scope: Update daemon session persistence to store task_id.\n- ✅ IN scope: Update todo CLI (src-tauri/src/bin/todo.rs) and any UI start-session path to send task_id.\n- ✅ IN scope: Where possible, badge updates/lookup prefer task_id.\n- ❌ OUT of scope: Implementing the CR snapshot store itself.\n\n## Acceptance Criteria\n\n- DaemonRequest::Start carries task_id (stable token) in addition to any display name/task_key.\n- Session struct persists task_id and is used as the canonical join key for CR.\n- Starting/continuing/attaching sessions still works after the protocol change.\n- If existing on-disk session state becomes incompatible, the code fails fast with a clear reset instruction (delete ~/.right-now state) (no migrations needed per repo guidelines).\n\nVerification:\n\n- cd src-tauri && cargo test\n- Manual: start a session via todo CLI and confirm session JSON includes task_id.\n\nRed-Green-Refactor plan:\n\n- Red: add a protocol/persistence unit test that asserts task_id round-trips.\n- Green: update protocol + persistence + CLI wiring.\n- Refactor: remove remaining task_key-only joins where safe.","status":"closed","priority":1,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.119700Z","created_by":"cole","updated_at":"2026-02-07T00:32:20.217925Z","closed_at":"2026-02-07T00:32:20.217910Z","close_reason":"Plumbed optional task_id through protocol, daemon start, persistence, CLI and UI","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:markdown","area:rust","area:sessions","area:ui"],"dependencies":[{"issue_id":"bd-q85.6","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.119700Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.6","depends_on_id":"bd-q85.3","type":"blocks","created_at":"2026-02-06T23:05:10.753301Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.7","title":"CR Phase 1: Add context_resurrection module scaffold + models","description":"Context:\n\n- CR v1 requires a daemon-owned module for capture + storage + query (plan §0.5.2, X.2).\n\nScope boundaries:\n\n- ✅ IN scope: Add src-tauri/src/context_resurrection/ with mod.rs + models.rs + stubs for store/capture/query.\n- ✅ IN scope: Define ContextSnapshotV1 + CaptureReason + SnapshotId types (serde).\n- ✅ IN scope: Define SessionProvider trait contract used by capture.rs (plan §0.5.3).\n- ❌ OUT of scope: Full SnapshotStore implementation (separate bead).\n\n## Acceptance Criteria\n\n- context_resurrection module exists and compiles.\n- models match plan §1.2 (ContextSnapshotV1) and use typed CaptureReason (not a free-form String).\n- A small Rust unit test proves JSON serialization/deserialization for ContextSnapshotV1.\n\nVerification:\n\n- cd src-tauri && cargo test\n\nRed-Green-Refactor plan:\n\n- Red: add failing compile/test scaffolding.\n- Green: add minimal models and module wiring.\n- Refactor: keep module public surface small and explicit.","status":"closed","priority":1,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.150965Z","created_by":"cole","updated_at":"2026-02-07T00:46:26.604240Z","closed_at":"2026-02-07T00:46:26.604037Z","close_reason":"Added context_resurrection module scaffold + ContextSnapshotV1 models + serde tests","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core","area:rust"],"dependencies":[{"issue_id":"bd-q85.7","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.150965Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.7","depends_on_id":"bd-q85.6","type":"blocks","created_at":"2026-02-06T23:05:10.785351Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.8","title":"CR Phase 1: SnapshotStore foundation (paths + atomic write + perms)","description":"Context:\n\n- The daemon owns CR storage under ~/.right-now/ (plan ADR-003/004, §1.3, §1.3.1, §0.13.2, §0.12.2).\n- We need atomic writes, strict permissions, and bounded cleanup of orphan temp files.\n\nScope boundaries:\n\n- ✅ IN scope: src-tauri/src/context_resurrection/store.rs: project-hash path layout + base dirs.\n- ✅ IN scope: atomic write helper (tmp + fsync + rename) and permissions (0600 files / 0700 dirs).\n- ✅ IN scope: bounded startup cleanup for stale tmp files (plan §1.3.1).\n- ✅ IN scope: storage availability flag / graceful degradation behavior (plan §0.12.2).\n- ❌ OUT of scope: capture logic and protocol handlers.\n\n## Acceptance Criteria\n\n- SnapshotStore can compute project hash (SHA-256 truncated 16 hex) and derive snapshot paths.\n- Writing a snapshot JSON is atomic and results in 0600 permissions; directories are 0700.\n- Startup cleanup deletes stale .tmp files older than 1h and is bounded.\n- If base dir cannot be created, store marks itself unavailable and CR operations degrade gracefully (no daemon crash).\n\nVerification:\n\n- cd src-tauri && cargo test\n\nRed-Green-Refactor plan:\n\n- Red: add unit tests for atomic write + permissions + unavailable store behavior.\n- Green: implement minimal store foundation.\n- Refactor: consolidate path helpers and keep side effects localized.","status":"closed","priority":1,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.183930Z","created_by":"cole","updated_at":"2026-02-07T00:52:35.175811Z","closed_at":"2026-02-07T00:52:35.175791Z","close_reason":"Implemented SnapshotStore foundation (hash+paths, atomic write, perms, tmp cleanup) + tests","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:core","area:rust","area:tests"],"dependencies":[{"issue_id":"bd-q85.8","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.183930Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.8","depends_on_id":"bd-q85.7","type":"blocks","created_at":"2026-02-06T23:05:10.815706Z","created_by":"cole","metadata":"{}","thread_id":""}]}
{"id":"bd-q85.9","title":"CR Phase 1: SnapshotStore read/list/latest APIs + tests","description":"Context:\n\n- UI needs latest/list/get endpoints backed by store primitives (plan X.2, §1.3).\n\nScope boundaries:\n\n- ✅ IN scope: SnapshotStore read/get/list/latest methods.\n- ✅ IN scope: Handle missing tail_path on read (treat as null; debug log) per plan §1.3.1.\n- ✅ IN scope: Unit tests for list ordering + latest selection.\n- ❌ OUT of scope: Retention/pruning rules and delete endpoints (separate bead).\n\n## Acceptance Criteria\n\n- Store can read a snapshot by ID.\n- Store can list snapshots for a (project, task_id) with an optional limit.\n- Store can compute \"latest\" snapshot for a (project, task_id) deterministically.\n- If snapshot JSON references tail_path but the file is missing, read succeeds and returns snapshot without tail_path.\n\nVerification:\n\n- cd src-tauri && cargo test\n\nRed-Green-Refactor plan:\n\n- Red: add tests with multiple snapshots and a missing tail file.\n- Green: implement minimal scan + parse logic.\n- Refactor: avoid redundant directory scans.","status":"closed","priority":2,"issue_type":"task","assignee":"cole","created_at":"2026-02-06T23:05:10.216242Z","created_by":"cole","updated_at":"2026-02-07T01:00:14.395838Z","closed_at":"2026-02-07T01:00:14.395619Z","close_reason":"Added SnapshotStore read/list/latest APIs + tests (missing tail_path handled)","source_repo":".","compaction_level":0,"original_size":0,"labels":["area:rust","area:tests"],"dependencies":[{"issue_id":"bd-q85.9","depends_on_id":"bd-q85","type":"parent-child","created_at":"2026-02-06T23:05:10.216242Z","created_by":"cole","metadata":"{}","thread_id":""},{"issue_id":"bd-q85.9","depends_on_id":"bd-q85.8","type":"blocks","created_at":"2026-02-06T23:05:10.848053Z","created_by":"cole","metadata":"{}","thread_id":""}]}
